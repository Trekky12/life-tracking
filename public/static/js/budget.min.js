
(function(a){a(document).ready(function(){b();a("select.category").each(function(){var e=a(this);d(e)});var c=a("#budgetTemplate").html();Mustache.parse(c);a("#add_budget").on("click",function(g){g.preventDefault();var f=a(".budget-entry").length;var h=Mustache.render(c,{index:f});a("#budgetForm .budget-entry.remaining").before(h);b();f++});a("body").on("change","select.category",function(h){var g=a(this);d(g);var f=g.parent().parent().find("input.description");if(f.val().length===0){f.val(g.find("option:selected").text())}});a("body").on("click",".btn-delete",function(f){if(!a(this).data("url")){f.preventDefault();a(this).parent().remove()}});a("body").on("change keyup","input.value",function(g){var h=parseFloat(a("#remaining_budget").data("income"));var f=0;a("input.value").each(function(){f+=parseFloat(a(this).val())});a("#remaining_budget").text(h-f)});function b(){a("select.form-control.category").chosen({width:"100%",disable_search:true,placeholder_text_multiple:lang.categories})}function d(f){var e=f.parent().parent().find(".category_costs");e.html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i>');a.ajax({url:jsObject.get_category_costs,method:"GET",data:{category:f.val()},success:function(g){var h="";if(g.value>0){h=g.value+" "+i18n.currency}else{h="-"}e.html(h)},error:function(g){alert(g)}})}})})(jQuery);