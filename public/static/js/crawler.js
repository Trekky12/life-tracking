"use strict";let filterCrawlerDatasets=document.getElementById("filterCrawlerDatasets");filterCrawlerDatasets.addEventListener("change",(function(e){var a={state:filterCrawlerDatasets.value};getCSRFToken().then((function(e){return a.csrf_name=e.csrf_name,a.csrf_value=e.csrf_value,fetch(jsObject.crawler_filter,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})})).then((function(e){return e.json()})).then((function(e){allowedReload=!0,window.location.reload()})).catch((function(e){console.log(e)}))}));let crawlerLinks=document.querySelectorAll("#crawler_links > li > a");function add_save_dataset_function(){document.querySelectorAll("span.save_crawler_dataset").forEach((function(e,a){e.addEventListener("click",(async function(a){var t={state:e.classList.contains("is_saved")?0:1,dataset:e.dataset.id};if(e.classList.contains("is_saved")&&!await confirmDialog(lang.really_unsave_dataset))return!1;getCSRFToken().then((function(e){return t.csrf_name=e.csrf_name,t.csrf_value=e.csrf_value,fetch(jsObject.crawler_dataset_save,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})})).then((function(e){return e.json()})).then((function(a){"success"===a.status&&e.classList.toggle("is_saved")})).catch((function(e){if(console.log(e),isOffline(e)){let e=new URLSearchParams(t).toString();saveDataWhenOffline(jsObject.crawler_dataset_save,"POST",e)}}))}))}))}crawlerLinks.forEach((function(e,a){e.addEventListener("click",(function(e){e.preventDefault(),e.target.parentElement.classList.toggle("active")}))})),add_save_dataset_function(),crawlersDataTable.on("update",(function(e){add_save_dataset_function()}));const markAsShownBtn=document.querySelector("#mark_all_as_shown");markAsShownBtn.addEventListener("click",(async function(e){e.preventDefault();try{let e=await getCSRFToken(),a={};a.csrf_name=e.csrf_name,a.csrf_value=e.csrf_value;let t=await fetch(jsObject.crawler_set_shown,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});"done"===(await t.json()).status?alert(lang.crawlers_mark_all_as_shown_success):alert(lang.crawlers_mark_all_as_shown_error)}catch(e){console.log(e),alert(lang.crawlers_mark_all_as_shown_error)}}));