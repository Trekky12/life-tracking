"use strict";let filterCrawlerDatasets=document.getElementById("filterCrawlerDatasets");filterCrawlerDatasets.addEventListener("change",(function(e){var t={state:filterCrawlerDatasets.value};getCSRFToken().then((function(e){return t.csrf_name=e.csrf_name,t.csrf_value=e.csrf_value,fetch(jsObject.crawler_filter,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})})).then((function(e){return e.json()})).then((function(e){allowedReload=!0,window.location.reload()})).catch((function(e){console.log(e)}))}));let crawlerLinks=document.querySelectorAll("#crawler_links > li > a");function add_save_dataset_function(){document.querySelectorAll("span.save_crawler_dataset").forEach((function(e,t){e.addEventListener("click",(function(t){var a={state:e.classList.contains("is_saved")?0:1,dataset:e.dataset.id};if(e.classList.contains("is_saved")&&!confirm(lang.really_unsave_dataset))return!1;getCSRFToken().then((function(e){return a.csrf_name=e.csrf_name,a.csrf_value=e.csrf_value,fetch(jsObject.crawler_dataset_save,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})})).then((function(e){return e.json()})).then((function(t){"success"===t.status&&e.classList.toggle("is_saved")})).catch((function(e){if(console.log(e),document.body.classList.contains("offline")){let e=new URLSearchParams(a).toString();saveDataWhenOffline(jsObject.crawler_dataset_save,"POST",e)}}))}))}))}crawlerLinks.forEach((function(e,t){e.addEventListener("click",(function(e){e.preventDefault(),e.target.parentElement.classList.toggle("active")}))})),add_save_dataset_function(),crawlersDataTable.on("update",(function(e){add_save_dataset_function()}));const markAsShownBtn=document.querySelector("#mark_all_as_shown");markAsShownBtn.addEventListener("click",(async function(e){e.preventDefault();try{let e=await getCSRFToken(),t={};t.csrf_name=e.csrf_name,t.csrf_value=e.csrf_value;let a=await fetch(jsObject.crawler_set_shown,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});"done"===(await a.json()).status?alert(lang.crawlers_mark_all_as_shown_success):alert(lang.crawlers_mark_all_as_shown_error)}catch(e){console.log(e),alert(lang.crawlers_mark_all_as_shown_error)}}));