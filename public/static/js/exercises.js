"use strict";const exercisesAvailable=document.querySelector("#exercises_available"),exercisesList=document.querySelector("#exercises_available_list"),loadingIconExercises=document.querySelector("#loadingIconExercises"),loadMoreExercises=document.querySelector("#loadMoreExercises"),filterBodyparts=document.getElementById("filterBodyParts"),filterSearchExercises=document.getElementById("filterSearchExercises"),isEdit="1"===exercisesAvailable.dataset.edit;function getExercises(e=!1){if(null!==exercisesList){let s=e?0:exercisesList.querySelectorAll(".exercise").length,i=10,t=filterBodyparts.value,r=filterSearchExercises.value;loadingIconExercises.classList.remove("hidden"),loadMoreExercises.classList.add("hidden");let c=jsObject.workouts_exercises_get+"?count="+i+"&start="+s+"&bodypart="+t+"&query="+r;return isEdit||(c+="&full=1"),fetch(c,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if(e&&(exercisesList.innerHTML=""),"error"!==t.status){loadingIconExercises.classList.add("hidden");let e=parseInt(t.count);if(e>0)s+i<e?loadMoreExercises.classList.remove("hidden"):loadMoreExercises.classList.add("hidden"),exercisesList.insertAdjacentHTML("beforeend",t.data);else{let e=document.createElement("p");e.innerHTML=lang.nothing_found,exercisesList.innerHTML="",exercisesList.appendChild(e),loadMoreExercises.classList.add("hidden")}}})).catch((function(e){console.log(e)}))}return emptyPromise()}function loadMoreExercisesFunctions(){if(null!==loadMoreExercises){loadMoreExercises.addEventListener("click",(function(e){getExercises()}));let e=100;isEdit?exercisesAvailable.addEventListener("scroll",(function(){exercisesAvailable.scrollTop>0&&exercisesAvailable.scrollTop+exercisesAvailable.clientHeight+e>=exercisesAvailable.scrollHeight&&(loadMoreExercises.classList.contains("hidden")||getExercises())})):document.addEventListener("scroll",(function(){let s=document.body,i=document.documentElement;(i.scrollTop>0&&i.scrollTop+i.clientHeight+e>=i.scrollHeight||s.scrollTop>0&&s.scrollTop+s.clientHeight+e>=s.scrollHeight)&&(loadMoreExercises.classList.contains("hidden")||getExercises())}))}}document.addEventListener("DOMContentLoaded",(function(){loadMoreExercisesFunctions(),getExercises()})),filterBodyparts.addEventListener("change",(function(e){e.preventDefault(),exercisesList.innerHTML="",getExercises()})),filterSearchExercises.addEventListener("keyup",(function(e){e.preventDefault(),getExercises(!0)}));