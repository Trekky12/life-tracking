"use strict";const exercisesAvailable=document.querySelector("#exercises_available"),exercisesList=document.querySelector("#exercises_available_list"),loadingIconExercises=document.querySelector("#loadingIconExercises"),loadMoreExercises=document.querySelector("#loadMoreExercises"),filterBodyparts=document.getElementById("filterBodyParts"),filterSearchExercises=document.getElementById("filterSearchExercises"),isEdit="1"===exercisesAvailable.dataset.edit;function getExercises(e=!1){if(null!==exercisesList){let s=e?0:exercisesList.querySelectorAll(".exercise").length,t=10,i=filterBodyparts.value,r=filterSearchExercises.value;loadingIconExercises.classList.remove("hidden"),loadMoreExercises.classList.add("hidden");let c=jsObject.workouts_exercises_get+"?count="+t+"&start="+s+"&bodypart="+i+"&query="+r;return isEdit||(c+="&full=1"),fetch(c,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(i){if(e&&(exercisesList.innerHTML=""),"error"!==i.status){loadingIconExercises.classList.add("hidden");let e=parseInt(i.count);if(e>0)s+t<e&&loadMoreExercises.classList.remove("hidden"),exercisesList.insertAdjacentHTML("beforeend",i.data);else{let e=document.createElement("p");e.innerHTML=lang.nothing_found,exercisesList.innerHTML="",exercisesList.appendChild(e)}}})).catch((function(e){console.log(e)}))}return emptyPromise()}function loadMoreExercisesFunctions(){if(null!==loadMoreExercises){loadMoreExercises.addEventListener("click",(function(e){getExercises()}));let e=100;isEdit?exercisesAvailable.addEventListener("scroll",(function(){exercisesAvailable.scrollTop>0&&exercisesAvailable.scrollTop+exercisesAvailable.clientHeight+e>=exercisesAvailable.scrollHeight&&(loadMoreExercises.classList.contains("hidden")||getExercises())})):document.addEventListener("scroll",(function(){let s=document.body,t=document.documentElement;(t.scrollTop>0&&t.scrollTop+t.clientHeight+e>=t.scrollHeight||s.scrollTop>0&&s.scrollTop+s.clientHeight+e>=s.scrollHeight)&&(loadMoreExercises.classList.contains("hidden")||getExercises())}))}}document.addEventListener("DOMContentLoaded",(function(){loadMoreExercisesFunctions(),getExercises()})),filterBodyparts.addEventListener("change",(function(e){e.preventDefault(),exercisesList.innerHTML="",getExercises()})),filterSearchExercises.addEventListener("keyup",(function(e){e.preventDefault(),getExercises(!0)}));