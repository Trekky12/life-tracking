"use strict";function getMarkers(){fetch(jsObject.marker_url+"?from="+from+"&to="+to,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()}).then(function(e){drawMarkers(e)}).catch(function(e){console.log(e)})}function drawMarkers(e){var t=[],a=[],n=0;for(n in e){let d=e[n],u=d.type;if(null===d.lat||null===d.lng)continue;var o=d.dt+"<br/>",r="";d.acc>0&&(r=lang.accuracy+" : "+d.acc+" m<br/>");var l='<a href="#" data-lat="'+d.lat+'" data-lng="'+d.lng+'" class="btn-get-address">'+lang.address+"</a>",c='<br/><br/><a href="#" data-url="'+jsObject.delete_marker_url+d.id+'" class="btn-delete">'+lang.delete_text+"</a>";let m=o+r+l,g={},p={opacity:.5,radius:d.acc};if(0===u&&(m+=c),1===u&&(g.icon=greenIcon,p.color="green",m+="<br/><br/><strong>"+d.description+" - "+d.value+" "+i18n.currency+"</strong>"),2===u){g.icon=yellowIcon,p.color="yellow";m+="<br/><br/><strong>"+(0==d.description?lang.car_refuel:lang.car_service)+"</strong>"}var i=L.marker([d.lat,d.lng],g).bindPopup(m);if(d.acc>0){var s=null;i.on("mouseover",function(e){s=L.circle([d.lat,d.lng],p).addTo(mymap)}),i.on("mouseout",function(e){mymap.removeLayer(s)})}0===u&&t.push([d.lat,d.lng,n]),a.push(i),i.addTo(mymap)}L.polyline(t).addTo(mymap);if(a.length>0){var d=new L.featureGroup(a);mymap.fitBounds(d.getBounds())}return!0}var mymap=L.map("mapid").setView([default_location.lat,default_location.lng],default_location.zoom);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:["a","b","c"]}).addTo(mymap);var greenIcon=new L.Icon({iconUrl:"/static/assets/images/marker-icon-green.png",shadowUrl:"/static/assets/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),yellowIcon=new L.Icon({iconUrl:"/static/assets/images/marker-icon-yellow.png",shadowUrl:"/static/assets/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});const from=document.getElementById("inputStart").value,to=document.getElementById("inputEnd").value;getMarkers();let locationFilter=document.getElementById("show-filter");null!==locationFilter&&locationFilter.addEventListener("click",function(e){e.preventDefault();let t=document.getElementById("search-form");t.style.height=t.scrollHeight+"px",t.classList.toggle("collapsed"),locationFilter.classList.toggle("hiddenSearch")});