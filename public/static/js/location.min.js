
(function(a){a(document).ready(function(){var b=L.map("mapid").setView([default_location.lat,default_location.lng],default_location.zoom);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:["a","b","c"]}).addTo(b);d();function d(){a.ajax({type:"GET",url:jsObject.marker_url,data:{from:a("#inputStart").val(),to:a("#inputEnd").val()},success:function(e){c(e)}})}function c(i){var g=[];var e=[];jQuery.each(i,function(l,j){if(j.lat===null||j.lng===null){return}var n=j.dt;var k="";if(j.acc>0){k="<br/>"+lang.accuracy+" : "+j.acc+" m"}var q='<br/><a href="#" data-id="'+j.id+'" class="btn-get-address">'+lang.address+"</a>";var m='<br/><br/><a href="#" data-url="'+jsObject.delete_marker_url+j.id+'" class="btn-delete">'+lang.delete_text+"</a>";var o=L.marker([j.lat,j.lng]).bindPopup(n+k+q+m);o.addTo(b);g.push([j.lat,j.lng,l]);if(j.acc>0){var p=null;o.on("mouseover",function(r){p=L.circle([j.lat,j.lng],{opacity:0.5,radius:j.acc}).addTo(b)});o.on("mouseout",function(r){b.removeLayer(p)})}e.push(o)});var f=L.polyline(g).addTo(b);var h=new L.featureGroup(e);b.fitBounds(h.getBounds());return true}a("body").on("click",".btn-get-address",function(f){f.preventDefault();var g=a(this).data("id");a.ajax({url:jsObject.get_address_url+g,method:"GET",success:function(h){if(h.status==="success"){var e="";if(h.data["police"]){e+=h.data["police"]+"\n"}if(h.data["road"]){e+=h.data["road"]+" "}if(h.data["house_number"]){e+=h.data["house_number"]}if(h.data["road"]||h.data["house_number"]){e+="\n"}if(h.data["postcode"]){e+=h.data["postcode"]+" "}if(h.data["city"]){e+=h.data["city"]}alert(e)}}})});a("#show-filter").on("click",function(){var e=a(this);a("#search-form").slideToggle(300,function(){e.toggleClass("hiddenSearch");if(a(this).is(":hidden")===true){e.attr("aria-hidden","true")}else{e.attr("aria-hidden","false")}})})})})(jQuery);