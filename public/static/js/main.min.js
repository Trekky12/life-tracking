
if("serviceWorker" in navigator){window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js?v=20181030");navigator.serviceWorker.ready.then(function(a){console.log("Service worker successfully registered on scope",a.scope)})})}(function(a){a(document).ready(function(){moment.locale(i18n.template);a.datepicker.setDefaults(a.datepicker.regional[i18n.template]);a("#go-back-btn").on("click",function(i){window.history.back()});a("#cancel").on("click",function(i){i.preventDefault();window.history.back()});a("body").on("click",".btn-delete",function(j){j.preventDefault();if(a(this).data("url")){var i=a(this).data("url");h(i)}});function h(i){if(!confirm(lang.really_delete)){return false}a.ajax({url:i,method:"DELETE",success:function(j){allowedReload=true;window.location.reload()},error:function(j){alert(j)}})}a("#dateSelect").datepicker({changeMonth:true,altFormat:"yy-mm-dd",altField:"#inputDate"});if(a("#inputDate").val()){a("#dateSelect").datepicker("setDate",moment(a("#inputDate").val()).toDate())}a("#dateSelect").change(function(){if(!a(this).val()){a("#inputDate").val("")}});var d=a("#dateStart").datepicker({changeMonth:true,altFormat:"yy-mm-dd",altField:"#inputStart"}).on("change",function(){e.datepicker("option","minDate",f(this))});if(a("#inputStart").val()){a("#dateStart").datepicker("setDate",moment(a("#inputStart").val()).toDate())}var e=a("#dateEnd").datepicker({changeMonth:true,altFormat:"yy-mm-dd",altField:"#inputEnd"}).on("change",function(){d.datepicker("option","maxDate",f(this))});if(a("#inputEnd").val()){a("#dateEnd").datepicker("setDate",moment(a("#inputEnd").val()).toDate())}e.datepicker("option","minDate",f(d[0]));d.datepicker("option","maxDate",f(e[0]));function f(l){var k;try{var i=a(l).datepicker("option","dateFormat");k=a.datepicker.parseDate(i,l.value)}catch(j){k=null}return k}a("span.closebtn").on("click",function(){a(this).parent().hide()});if(a("#financeSummaryChart").length){var b=new Chart(a("#financeSummaryChart"),{data:{labels:a("#financeSummaryChart").data("labels"),datasets:[{label:a("#financeSummaryChart").data("label1"),data:a("#financeSummaryChart").data("values1"),backgroundColor:"#FF0000"},{label:a("#financeSummaryChart").data("label2"),data:a("#financeSummaryChart").data("values2"),backgroundColor:"#008800"}]},type:"bar",options:{responsive:true,maintainAspectRatio:false,scales:{yAxes:[{ticks:{min:0}}]}}})}var g=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"];if(a("#financeDetailChart").length){var b=new Chart(a("#financeDetailChart"),{data:{labels:a("#financeDetailChart").data("labels"),datasets:[{backgroundColor:g,data:a("#financeDetailChart").data("values")}]},type:"pie",options:{responsive:true,maintainAspectRatio:false,legend:{position:"top"}}})}var c=null;a("#finance_table").DataTable({language:{url:jsObject.datatable},paging:true,info:true,responsive:true,autoWidth:false,order:[[0,"desc"],[1,"desc"]],columnDefs:[{targets:[0],render:function(j,i,k){return moment(j).format(i18n.dateformatJS)},responsivePriority:-1},{targets:[6,7],orderable:false,responsivePriority:3},{targets:[1,3],responsivePriority:2},{targets:[2],responsivePriority:1},{targets:[4],responsivePriority:-1},{targets:[5],render:function(j,i,k){if(i==="display"||i==="filter"){return j+" "+i18n.currency}return j},responsivePriority:-1}],processing:true,serverSide:true,ajax:{url:jsObject.finances_table,dataSrc:function(i){c=i.recordsTotal!==i.recordsFiltered?i.sum:null;return i.data}},deferLoading:jsObject.datacount,drawCallback:function(j){var i=this.api();var k="";if(c!==null){k=c+" "+i18n.currency}a(i.column(5).footer()).html(k)}});a("#category_table").DataTable({paging:true,info:true,columnDefs:[{targets:[2,3],orderable:false}],language:{url:jsObject.datatable},responsive:true,autoWidth:false});a("#category_assignment_table").DataTable({paging:true,info:true,columnDefs:[{targets:[4,5],orderable:false}],language:{url:jsObject.datatable},responsive:true,autoWidth:false});a("#recurring_table").DataTable({paging:true,info:true,order:[[3,"desc"]],columnDefs:[{targets:[8,9],orderable:false},{targets:[4,5],render:function(j,i,k){return j?moment(j).format(i18n.dateformatJS):""}},{targets:[7],render:function(j,i,k){return j?moment(j).format(i18n.dateformatJSFull):""}},{targets:[3],render:function(j,i,k){if(i==="display"||i==="filter"){return j+" "+i18n.currency}return j},responsivePriority:-1}],language:{url:jsObject.datatable},responsive:true,autoWidth:false});a("#users_table").DataTable({paging:false,info:false,columnDefs:[{targets:[5,6,7],orderable:false}],language:{url:jsObject.datatable},responsive:true,autoWidth:false});a("#fuel_table").DataTable({order:[[0,"desc"]],columnDefs:[{targets:[9,10],orderable:false},{targets:[0],render:function(j,i,k){return moment(j).format(i18n.dateformatJS)}}],dom:'<"top"f>rt<"bottom"ip>',language:{url:jsObject.datatable},paging:true,info:true,responsive:true,autoWidth:false,processing:true,serverSide:true,ajax:jsObject.fuel_table,deferLoading:jsObject.datacount});a("#service_table").DataTable({order:[[0,"desc"]],columnDefs:[{targets:[8,9],orderable:false},{targets:[0],render:function(j,i,k){return moment(j).format(i18n.dateformatJS)}}],dom:'<"top"f>rt<"bottom"ip>',language:{url:jsObject.datatable},paging:true,info:true,responsive:true,autoWidth:false,processing:true,serverSide:true,ajax:jsObject.service_table,deferLoading:jsObject.datacount2});a(".mileage_year_table").DataTable({order:[[0,"asc"]],dom:'<"top">rt<"bottom"ip>',language:{url:jsObject.datatable},paging:true,info:true,responsive:true,autoWidth:false});a("#stats_table").DataTable({language:{url:jsObject.datatable},paging:true,order:[[0,"desc"]],columnDefs:[{targets:[0],render:function(j,i,k){return j},responsivePriority:-1},{targets:[1,2,3],render:function(j,i,k){if(i==="display"||i==="filter"){return j+" "+i18n.currency}return j}},{targets:[4],orderable:false}],responsive:true,autoWidth:false});a("#stats_year_table").DataTable({language:{url:jsObject.datatable},paging:true,order:[[0,"desc"]],columnDefs:[{targets:[0],render:function(j,i,k){if(i==="display"||i==="filter"){return moment().month(j-1).format("MMMM")}return j},responsivePriority:-1},{targets:[1,2,3],render:function(j,i,k){if(i==="display"||i==="filter"){return j+" "+i18n.currency}return j},responsivePriority:-1}],responsive:true,autoWidth:false});a("#stats_month_table").DataTable({language:{url:jsObject.datatable},paging:true,order:[[2,"desc"],[0,"asc"]],responsive:true,autoWidth:false,columnDefs:[{targets:[3],orderable:false},{targets:[0],responsivePriority:-1},{targets:[2],render:function(j,i,k){if(i==="display"||i==="filter"){return j+" "+i18n.currency}return j},responsivePriority:-1}]});a("#stats_cat_table").DataTable({language:{url:jsObject.datatable},paging:true,order:[[1,"desc"],[0,"asc"]],responsive:true,autoWidth:false,columnDefs:[{targets:[2,3],orderable:false},{targets:[0],responsivePriority:-1},{targets:[1],render:function(j,i,k){if(i==="display"||i==="filter"){return j+" "+i18n.currency}return j},responsivePriority:-1}]});a("#cars_table").DataTable({paging:true,info:true,columnDefs:[{targets:[1,2],orderable:false}],language:{url:jsObject.datatable},responsive:true,autoWidth:false});a("#boards_table").DataTable({paging:true,info:true,columnDefs:[{targets:[1,2],orderable:false}],language:{url:jsObject.datatable},responsive:true,autoWidth:false});a("#stats_budget_table").DataTable({language:{url:jsObject.datatable},paging:true,order:[[2,"desc"],[1,"asc"],[0,"asc"]],responsive:true,autoWidth:false,columnDefs:[{targets:[3,4],orderable:false},{targets:[0],responsivePriority:-1},{targets:[2],render:function(j,i,k){if(i==="display"||i==="filter"){return j+" "+i18n.currency}return j},responsivePriority:-1}]});if(a("#checkboxCommon").length){a("#checkboxCommon").on("change",function(){a("#commonValue").toggle();var i=a("#inputValue").val();if(i){if(a(this).is(":checked")){a("#inputCommonValue").val(i);a("#inputValue").val(i/2)}else{a("#inputValue").val(a("#inputCommonValue").val());a("#inputCommonValue").val(null)}}})}a(".set_calculation_date").on("click",function(i){a.ajax({url:jsObject.set_mileage_type,method:"POST",data:{state:a(this).data("type")===1&&a(this).is(":checked")?1:0},success:function(j){window.location.reload()},error:function(j){alert(j)}});return});a("input.carServiceType").change(function(){a("#carServiceFuel").toggleClass("hidden");a("#carServiceService").toggleClass("hidden")});a(".slider").slider({create:function(i,j){a(this).slider("option","min",a(this).data("min"));a(this).slider("option","max",a(this).data("max"));a(this).slider("value",a(this).data("level"))},slide:function(i,j){a(this).siblings(".slider-value").val(j.value)}});if(a("#logviewer").length){a("#logviewer").scrollTop(a("#logviewer")[0].scrollHeight);a('.log-filter input[type="checkbox"]').on("change",function(j){var i=a(this).data("type");a("#logviewer .log-entry."+i).toggle();a("#logviewer").scrollTop(a("#logviewer")[0].scrollHeight)})}a("#financesRecurringForm #dateStart").on("change",function(){a("#financesRecurringForm input[name=last_run]").val("")})})})(jQuery);