"use strict";const body=document.getElementsByTagName("BODY")[0],header=document.getElementById("masthead"),menuButton=document.getElementById("menu-toggle"),navigation=document.getElementById("site-navigation"),navigationOverlay=document.getElementById("navigation-overlay"),FBAs=document.querySelectorAll(".button-add-item"),boardSidebar=document.getElementById("board-sidebar");let wasMobile=isMobile();const max_opacity=.8;let isMapMove=!1,isMapFullscreen=!1,menuList=document.querySelector("#site-navigation ul"),navi_width=256,xStartPosition=null,xMovePosition=null,yStartPosition=null,yMovePosition=null,isOpenAllowed=null,isCloseAllowed=null,threshold_edge=100,xMinDistanceClose=50,xMinDistanceOpen=50,yMinDistance=50,currentPos=0,skip=!1,isMultitouchMove=!1;function openMenu(){menuButton.setAttribute("aria-expanded","true"),menuList.setAttribute("aria-expanded","true"),menuButton.classList.add("open"),body.classList.add("navigation-drawer-toggled"),isMobile()&&(navigationOverlay.classList.add("visible"),navigationOverlay.style.removeProperty("transition-duration"),navigationOverlay.style.opacity=.8),navigation.classList.add("animate"),navigation.style.removeProperty("transform"),navigation.classList.add("toggled"),document.activeElement.blur(),currentPos=navi_width}function closeMenu(){menuButton.setAttribute("aria-expanded","false"),menuList.setAttribute("aria-expanded","false"),menuButton.classList.remove("open"),body.classList.remove("navigation-drawer-toggled"),navigationOverlay.style.removeProperty("transition-duration"),navigationOverlay.style.opacity=0,setTimeout((function(e){navigationOverlay.classList.remove("visible")}),200),navigation.classList.add("animate"),navigation.style.removeProperty("transform"),navigation.classList.remove("toggled"),currentPos=0,reset()}function handleTouchStart(e){if(e.touches.length>1)return;const t=e.touches[0];xStartPosition=t.clientX,yStartPosition=t.clientY,isOpenAllowed=xStartPosition<threshold_edge&&!navigation.classList.contains("toggled"),isCloseAllowed=navigation.classList.contains("toggled"),skip=!1,isMultitouchMove=!1}function handleTouchMove(e){if(isAppResumed)return void(isAppResumed=!1);if(!xStartPosition)return;if(e.touches.length>1)return void(isMultitouchMove=!0);if(isMapMove)return;if(isMapFullscreen)return;let t=xMovePosition;xMovePosition=e.touches[0].clientX,yMovePosition=e.touches[0].clientY;let o=navigation.classList.contains("toggled"),i=Math.abs(xStartPosition-xMovePosition);Math.abs(yStartPosition-yMovePosition);if(skip=!1,o&&i<xMinDistanceClose)return void(skip=!0);if(!o&&i<xMinDistanceOpen)return void(skip=!0);let n=xMovePosition,a=xStartPosition<xMovePosition;a&&isOpenAllowed&&(moveNavigationToPosition(n),t&&t>xMovePosition&&(xStartPosition=t,isCloseAllowed=!0)),!a&&isCloseAllowed&&(moveNavigationToPosition(n),t&&t<xMovePosition&&(xStartPosition=t,isOpenAllowed=!0))}function moveNavigationToPosition(e){e>navi_width&&(e=navi_width),e<0&&(e=0),navigation.classList.remove("animate"),navigation.style.transform="translateX("+(-navi_width+e)+"px)",currentPos=e;let t=e/navi_width;t<=0&&(t=0),t>=1&&(t=1),navigationOverlay.classList.add("visible"),navigationOverlay.style.transitionDuration="0s",navigationOverlay.style.opacity=.8*t}function handleTouchEnd(e){if(isAppResumed)return isAppResumed=!1,xStartPosition=null,void(xMovePosition=null);if(!xStartPosition||!xMovePosition)return;if(isMultitouchMove&&0==currentPos)return;let t=navigation.classList.contains("toggled");skip&&currentPos>0&&(t?openMenu():closeMenu()),skip||(t?xMovePosition<xStartPosition&&isCloseAllowed?closeMenu():openMenu():xMovePosition>xStartPosition&&isOpenAllowed?openMenu():closeMenu()),reset()}function reset(){xStartPosition=null,isOpenAllowed=null,isCloseAllowed=null,xMovePosition=null}function handleResize(){(!wasMobile&&isMobile()||wasMobile&&!isMobile())&&(navigation.classList.remove("toggled"),body.classList.remove("navigation-drawer-toggled"),setCookie("navigationdrawer_desktophidden",0),navigationOverlay.style.opacity=0,navigationOverlay.classList.remove("visible")),wasMobile=isMobile()}document.addEventListener("DOMContentLoaded",(e=>{scrollToTab(document.querySelector("a.tabbar-tab.active"),!0)})),(/^(iPhone|iPad|iPod)/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&body.classList.add("ios"),navigation&&header&&navigationOverlay&&(menuButton.addEventListener("click",(function(e){navigation.classList.contains("toggled")?closeMenu():openMenu(),isMobile()?setCookie("navigationdrawer_desktophidden",0):navigation.classList.contains("toggled")?setCookie("navigationdrawer_desktophidden",1):setCookie("navigationdrawer_desktophidden",0)})),navigationOverlay.addEventListener("click",(function(e){menuButton.click()})),isMobile()&&(document.addEventListener("touchstart",handleTouchStart,!1),document.addEventListener("touchmove",handleTouchMove,!1),document.addEventListener("touchend",handleTouchEnd,!1)),window.addEventListener("resize",handleResize));let prevScrollpos=window.pageYOffset;document.addEventListener("scroll",(function(){var e=window.pageYOffset;if(Math.abs(prevScrollpos-e)<10)return;let t=header.offsetHeight;prevScrollpos<=e?header.style.top=-t+"px":header.style.removeProperty("top"),header.style.top=prevScrollpos<=e?-t+"px":"0",FBAs.forEach((function(t){prevScrollpos<=e?t.style.bottom="-100px":t.style.removeProperty("bottom")})),boardSidebar&&(boardSidebar.style.top=prevScrollpos<=e?"0":t+"px"),prevScrollpos=e}));const rippleIcons=document.querySelectorAll(".icon-ripple-wrapper");rippleIcons.forEach((function(e){isTouchEnabled()?(e.addEventListener("touchstart",(function(t){e.classList.add("ripple-effect-start"),e.focus()})),e.addEventListener("touchend",(function(t){setTimeout((function(){e.classList.remove("ripple-effect-start"),e.classList.add("ripple-effect-end"),setTimeout((function(){e.classList.remove("ripple-effect-end")}),200)}),300)}))):(e.addEventListener("mousedown",(function(t){e.classList.add("ripple-effect-start")})),e.addEventListener("mouseup",(function(t){e.classList.remove("ripple-effect-start"),e.classList.add("ripple-effect-end"),setTimeout((function(){e.classList.remove("ripple-effect-end")}),200)})))}));const tabbarScrollArea=document.querySelector(".tabbar-scrollarea"),tabbarTabs=document.querySelectorAll("a.tabbar-tab");function scrollToTab(e,t=!1){if(!e)return;let o="smooth";t&&(tabbarScrollArea.parentNode.style.height="50px",body.classList.add("has-tabbar"),o="instant");let i=e.offsetWidth,n=e.offsetLeft,a=(tabbarScrollArea.offsetWidth-i)/2,s=0;isMobile()||(s=0);let l=n-a+s;tabbarScrollArea.scrollTo({left:l,behavior:o})}tabbarTabs.forEach((function(e){e.addEventListener("click",(function(t){tabbarTabs.forEach((function(e){e.classList.remove("active")})),e.classList.add("active"),scrollToTab(e,!1),setTimeout((function(){tabbarScrollArea.parentNode.style.height=0,body.classList.remove("has-tabbar")}),200)}))}));const tabbarScrollButtons=document.querySelectorAll(".tabbar-tab-scroll-btn");tabbarScrollButtons.forEach((function(e){e.addEventListener("click",(function(t){tabbarScrollArea.style.scrollBehavior="smooth","left"==e.dataset.type?tabbarScrollArea.scrollLeft-=50:tabbarScrollArea.scrollLeft+=50}))}));