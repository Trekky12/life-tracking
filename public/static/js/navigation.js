"use strict";const body=document.getElementsByTagName("BODY")[0],header=document.getElementById("masthead"),menuButton=document.getElementById("menu-toggle"),navigation=document.getElementById("site-navigation"),navigationOverlay=document.getElementById("navigation-overlay"),FBAs=document.querySelectorAll(".button-add-item"),boardSidebar=document.getElementById("board-sidebar");let wasMobile=isMobile();const max_opacity=.8;if(document.addEventListener("DOMContentLoaded",(t=>{scrollToTab(document.querySelector("a.tabbar-tab.active"),!0)})),(/^(iPhone|iPad|iPod)/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&body.classList.add("ios"),navigation&&header&&navigationOverlay){let t=navigation.getElementsByTagName("ul")[0],e=256;function a(){menuButton.setAttribute("aria-expanded","true"),t.setAttribute("aria-expanded","true"),menuButton.classList.add("open"),body.classList.add("navigation-drawer-toggled"),isMobile()&&(navigationOverlay.classList.add("visible"),navigationOverlay.style.removeProperty("transition-duration"),navigationOverlay.style.opacity=.8),navigation.classList.add("animate"),navigation.style.removeProperty("transform"),navigation.classList.add("toggled"),document.activeElement.blur(),b=e}function n(){menuButton.setAttribute("aria-expanded","false"),t.setAttribute("aria-expanded","false"),menuButton.classList.remove("open"),body.classList.remove("navigation-drawer-toggled"),navigationOverlay.style.removeProperty("transition-duration"),navigationOverlay.style.opacity=0,setTimeout((function(t){navigationOverlay.classList.remove("visible")}),200),navigation.classList.add("animate"),navigation.style.removeProperty("transform"),navigation.classList.remove("toggled"),b=0,h()}menuButton.addEventListener("click",(function(t){navigation.classList.contains("toggled")?n():a(),isMobile()?setCookie("navigationdrawer_desktophidden",0):navigation.classList.contains("toggled")?setCookie("navigationdrawer_desktophidden",1):setCookie("navigationdrawer_desktophidden",0)})),navigationOverlay.addEventListener("click",(function(t){menuButton.click()})),isMobile()&&(document.addEventListener("touchstart",m,!1),document.addEventListener("touchmove",p,!1),document.addEventListener("touchend",L,!1));let i=null,o=null,s=null,r=null,l=null,d=null,c=100,u=50,v=50,b=0,f=!1,g=!1;function m(t){if(t.touches.length>1)return;const e=t.touches[0];i=e.clientX,s=e.clientY,l=i<c&&!navigation.classList.contains("toggled"),d=navigation.classList.contains("toggled"),f=!1,g=!1}function p(t){if(isAppResumed)return void(isAppResumed=!1);if(!i)return;if(t.touches.length>1)return void(g=!0);let e=o;o=t.touches[0].clientX,r=t.touches[0].clientY;let a=navigation.classList.contains("toggled"),n=Math.abs(i-o);Math.abs(s-r);if(f=!1,a&&n<u)return void(f=!0);if(!a&&n<v)return void(f=!0);let c=o,b=i<o;b&&l&&(y(c),e&&e>o&&(i=e,d=!0)),!b&&d&&(y(c),e&&e<o&&(i=e,l=!0))}function y(t){t>e&&(t=e),t<0&&(t=0),navigation.classList.remove("animate"),navigation.style.transform="translateX("+(-e+t)+"px)",b=t;let a=t/e;a<=0&&(a=0),a>=1&&(a=1),navigationOverlay.classList.add("visible"),navigationOverlay.style.transitionDuration="0s",navigationOverlay.style.opacity=.8*a}function L(t){if(isAppResumed)return void(isAppResumed=!1);if(!i||!o)return;if(g&&0==b)return;let e=navigation.classList.contains("toggled");f&&b>0&&(e?a():n()),f||(e?o<i&&d?n():a():o>i&&l?a():n()),h()}function h(){i=null,l=null,d=null,o=null}function E(){(!wasMobile&&isMobile()||wasMobile&&!isMobile())&&(navigation.classList.remove("toggled"),body.classList.remove("navigation-drawer-toggled"),setCookie("navigationdrawer_desktophidden",0),navigationOverlay.style.opacity=0,navigationOverlay.classList.remove("visible")),wasMobile=isMobile()}window.addEventListener("resize",E);let A=window.pageYOffset;document.addEventListener("scroll",(function(){var t=window.pageYOffset;if(Math.abs(A-t)<10)return;let e=header.offsetHeight;A<=t?header.style.top=-e+"px":header.style.removeProperty("top"),header.style.top=A<=t?-e+"px":"0",FBAs.forEach((function(e){A<=t?e.style.bottom="-100px":e.style.removeProperty("bottom")})),boardSidebar&&(boardSidebar.style.top=A<=t?"0":e+"px"),A=t}))}const rippleIcons=document.querySelectorAll(".icon-ripple-wrapper");rippleIcons.forEach((function(t){isTouchEnabled()?(t.addEventListener("touchstart",(function(e){t.classList.add("ripple-effect-start"),t.focus()})),t.addEventListener("touchend",(function(e){setTimeout((function(){t.classList.remove("ripple-effect-start"),t.classList.add("ripple-effect-end"),setTimeout((function(){t.classList.remove("ripple-effect-end")}),200)}),300)}))):(t.addEventListener("mousedown",(function(e){t.classList.add("ripple-effect-start")})),t.addEventListener("mouseup",(function(e){t.classList.remove("ripple-effect-start"),t.classList.add("ripple-effect-end"),setTimeout((function(){t.classList.remove("ripple-effect-end")}),200)})))}));const tabbarScrollArea=document.querySelector(".tabbar-scrollarea"),tabbarTabs=document.querySelectorAll("a.tabbar-tab");function scrollToTab(t,e=!1){if(!t)return;let a="smooth";e&&(tabbarScrollArea.parentNode.style.height="50px",body.classList.add("has-tabbar"),a="instant");let n=t.offsetWidth,i=t.offsetLeft,o=(tabbarScrollArea.offsetWidth-n)/2,s=0;isMobile()||(s=0);let r=i-o+s;tabbarScrollArea.scrollTo({left:r,behavior:a})}tabbarTabs.forEach((function(t){t.addEventListener("click",(function(e){tabbarTabs.forEach((function(t){t.classList.remove("active")})),t.classList.add("active"),scrollToTab(t,!1),setTimeout((function(){tabbarScrollArea.parentNode.style.height=0,body.classList.remove("has-tabbar")}),200)}))}));const tabbarScrollButtons=document.querySelectorAll(".tabbar-tab-scroll-btn");tabbarScrollButtons.forEach((function(t){t.addEventListener("click",(function(e){tabbarScrollArea.style.scrollBehavior="smooth","left"==t.dataset.type?tabbarScrollArea.scrollLeft-=50:tabbarScrollArea.scrollLeft+=50}))}));