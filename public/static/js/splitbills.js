"use strict";const splitbillsForm=document.getElementById("splitbillsBillsForm"),buttons=document.querySelectorAll(".splitbill_btn");if(splitbillsForm){let e=splitbillsForm.querySelectorAll("input.balance_paid"),t=splitbillsForm.querySelectorAll("input.balance_spend"),l=splitbillsForm.querySelector("#inputValue"),n=splitbillsForm.querySelector("#remaining_paid"),i=splitbillsForm.querySelector("#remaining_spend");function getSum(e){let t=0;return e.forEach((function(e){let l=Number.parseFloat(e.value);l&&(t+=l)})),t.toFixed(2)}function getTotal(){return parseFloat(l.value).toFixed(2)}function calculateRemaining(e,t){let l=getSum(e),n=getTotal();t.innerHTML=(n-l).toFixed(2)}l.addEventListener("change",(function(l){e.forEach((function(e){e.value=0})),t.forEach((function(e){e.value=0})),calculateRemaining(e,n),calculateRemaining(t,i)})),buttons.forEach((function(a,o){a.addEventListener("click",(function(o){o.preventDefault();let u=a.dataset.type,c=a.dataset.id,r=parseFloat(l.value);if(r>0){switch(u){case"paid_same":equal_splitting(e,r);break;case"paid_person":e.forEach((function(e){e.value=0})),splitbillsForm.querySelector('input[name="balance['+c+'][paid]"]').value=r;break;case"spend_same":equal_splitting(t,r);break;case"spend_person":t.forEach((function(e){e.value=0})),splitbillsForm.querySelector('input[name="balance['+c+'][spend]"]').value=r}calculateRemaining(e,n),calculateRemaining(t,i)}}))})),splitbillsForm.addEventListener("submit",(function(l){let n=getSum(e),i=getSum(t),a=getTotal();a===n&&a===i||(l.preventDefault(),console.log(a),console.log(n),console.log(i),alert(lang.splitbills_numbers_wrong))})),e.forEach((function(t){t.addEventListener("input",(function(t){calculateRemaining(e,n)}))})),t.forEach((function(e){e.addEventListener("input",(function(e){calculateRemaining(t,i)}))}))}function equal_splitting(e,t){let l=[].slice.call(e).sort((function(){return.5-Math.random()})),n=l.length;l.forEach((function(e){let l=(t/n).toFixed(2);e.value=l,n--,t-=l}))}