"use strict";const comeButtons=document.querySelectorAll(".timesheet-fast-come-btn"),leaveButtons=document.querySelectorAll(".timesheet-fast-leave-btn"),timesheetLatField=document.querySelector("input#geoLat"),timesheetLngField=document.querySelector("input#geoLng"),timesheetAccField=document.querySelector("input#geoAcc"),alertSuccess=document.querySelector("#alertSuccess");function send(e,t){let n=document.querySelector("#alertError"),c=n.querySelector("#alertErrorDetail");n.classList.add("hidden"),alertSuccess.classList.add("hidden"),c.innerHTML="";let r=e.dataset.url,a={};return a[t+"_lat"]=timesheetLatField.value,a[t+"_lng"]=timesheetLngField.value,a[t+"_acc"]=timesheetAccField.value,getCSRFToken().then((function(e){return a.csrf_name=e.csrf_name,a.csrf_value=e.csrf_value,fetchWithTimeout(r,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})})).then((function(e){return e.json()})).then((function(t){if("success"===t.status){if(alertSuccess.classList.remove("hidden"),1===t.data){e.closest(".grid").querySelectorAll(".card").forEach((function(e,t){e.classList.toggle("inactive")}))}}else c.innerHTML=t.message,n.classList.remove("hidden")})).catch((function(e){console.log(e),c.innerHTML=lang.request_error,n.classList.remove("hidden")}))}comeButtons.forEach((function(e,t){e.addEventListener("click",(function(t){t.preventDefault(),send(e,"start")}))})),leaveButtons.forEach((function(e,t){e.addEventListener("click",(function(t){t.preventDefault(),send(e,"end")}))}));const projectCategorySelects=document.querySelectorAll("select.category");projectCategorySelects.forEach((function(e,t){new Selectr(e,{searchable:!1,placeholder:lang.categories,messages:{noOptions:lang.no_options}})}));const dateTimePickerStart=document.querySelector("#datetimePickerStart"),dateTimePickerEnd=document.querySelector("#datetimePickerEnd");dateTimePickerStart&&dateTimePickerEnd&&(flatpickr(dateTimePickerStart,{altInput:!0,altFormat:i18n.dateformatTwig.datetimeShort,dateFormat:"Y-m-d H:i",locale:i18n.template,enableTime:!0,time_24hr:!0,minuteIncrement:1,onValueUpdate:function(e){dateTimePickerEnd._flatpickr.setDate(e[0])}}),flatpickr(dateTimePickerEnd,{altInput:!0,altFormat:i18n.dateformatTwig.datetimeShort,dateFormat:"Y-m-d H:i",locale:i18n.template,enableTime:!0,time_24hr:!0,minuteIncrement:1}));