"use strict";const imageInput=document.querySelector('input[type="file"]'),deleteImage=document.querySelector("button#delete_image"),eventImage=document.getElementById("event_image"),loadingIcon=document.getElementById("loadingIconImageUpload");imageInput&&imageInput.addEventListener("change",(function(e){getCSRFToken().then((function(e){loadingIcon.classList.remove("hidden");var n=new FormData;return n.append("image",imageInput.files[0]),n.append("csrf_name",e.csrf_name),n.append("csrf_value",e.csrf_value),fetch(jsObject.trip_event_image_upload,{method:"POST",credentials:"same-origin",body:n}).then((function(e){return e.json()})).then((function(e){loadingIcon.classList.add("hidden"),"success"===e.status?(eventImage.classList.remove("hidden"),eventImage.src=e.thumbnail,deleteImage.classList.remove("hidden"),imageInput.value=""):(eventImage.classList.add("hidden"),eventImage.src="",deleteImage.classList.add("hidden"))})).catch((function(e){loadingIcon.classList.add("hidden"),console.log(e)}))}))})),deleteImage&&deleteImage.addEventListener("click",(function(e){e.preventDefault(),getCSRFToken().then((function(e){return loadingIcon.classList.remove("hidden"),fetch(jsObject.trip_event_image_delete,{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})).then((function(e){loadingIcon.classList.add("hidden"),eventImage.classList.add("hidden"),eventImage.src="",deleteImage.classList.add("hidden")})).catch((function(e){loadingIcon.classList.add("hidden"),console.log(e)}))}));