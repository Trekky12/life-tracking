"use strict";function generateOption(e){const t=document.createElement("option");return t.value=e.id,t.selected=!0,t}function generateChip(e){const t=document.createElement("div");return t.classList.add("chip"),t.classList.add(`chip-${e.id}`),t.innerText=e.login,t.dataset.id=e.id,t}function generateIcon(e){const t=document.createElement("span");return t.classList.add("remove"),t.innerHTML="&times;",t}const users=document.getElementById("users"),input=document.getElementById("users_query"),chips=document.getElementById("users_chips");new autoComplete({noResults:(e,t)=>{document.querySelector(".users-collection").classList.remove("hidden")},data:{src:async()=>{let e=users.dataset.module;for(var t=users.selectedOptions,n=[],s=0;s<t.length;s++)n.push(t[s].value);return fetch(jsObject.usersearch+"?query="+input.value+"&module="+e+"&users[]="+n.join("&users[]="),{method:"GET",credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){return"error"!==e.status?e.data:[]})).catch((e=>[]))},key:["login"],cache:!1},query:{manipulate:function(e){return document.querySelector(".users-collection").classList.add("hidden"),e}},onSelection:e=>{const t=generateChip(e.selection.value);t.appendChild(generateIcon(e.selection.value)),chips.appendChild(t),users.add(generateOption(e.selection.value)),input.value=""},resultsList:{render:!0,container:e=>{e.classList.add("users-collection")},destination:"#users_collection-wrapper",position:"beforeend",element:"ul"},highlight:!0,trigger:e=>e.length>0,maxResults:10,threshold:1,debounce:500,placeHolder:lang.searching,selector:"#users_query"}),chips.addEventListener("click",(function(e){if("SPAN"===e.target.tagName&&e.target.classList.contains("remove")){let t=e.target.closest(".chip"),n=t.dataset.id;Array.from(users.options).forEach((e=>{e.value===n&&(e.remove(),t.remove())}))}}));