"use strict";const requestWidgets=document.querySelectorAll(".request_widget");function load(e){let t=e.dataset.id,n=e.dataset.widget,a=e.dataset.options,o=jsObject.frontpage_widget_request+t;return(n||a)&&(o+="?",n&&(o+="widget="+n),a&&(o+="options="+a)),fetch(o,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json","sw-cache":"none"}}).then((function(e){return e.json()})).then((function(t){e.innerHTML=t.data})).catch((function(e){console.log(e)}))}requestWidgets.forEach((function(e){load(e);var t=e.dataset.reload;t>0&&setInterval((function(){load(e)}),1e3*t)})),document.addEventListener("click",(async function(e){let t=e.target.closest(".btn-archive-card");t&&setTimeout((async function(){let e=t.dataset.url,n=0===parseInt(t.dataset.archive)?1:0;if(0===n){if(!await confirmDialog(lang.boards_undo_archive))return t.checked=!0,!1}else if(!await confirmDialog(lang.boards_really_archive))return t.checked=!1,!1;var a={archive:n};getCSRFToken().then((function(t){return a.csrf_name=t.csrf_name,a.csrf_value=t.csrf_value,fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})})).then((function(e){return e.json()})).then((function(e){t.dataset.archive=n})).catch((function(e){console.log(e)}))}),20)}));