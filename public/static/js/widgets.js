"use strict";const requestWidgets=document.querySelectorAll(".request_widget");function load(e){let a=e.dataset.id;return fetch(jsObject.frontpage_widget_request+a,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){switch(e.innerHTML="",a.type){case"efa":e.appendChild(createEFATable(a.result))}})).catch((function(e){console.log(e)}))}function createEFATable(e){var a=document.createElement("table");a.classList.add("small","table"),a.border="0";var t=e.departureList;for(var r in t){var n=createEFADataRow(t[r]);a.appendChild(n)}return a}function createEFADataRow(e){var a=document.createElement("tr"),t=document.createElement("td");t.className="departures__departure__line",t.innerHTML='<span class="departures__departure__line__number xsmall">'+e.servingLine.number+"</span>",a.appendChild(t);var r=document.createElement("td");r.innerHTML='<span class="departures__departure__direction small">'+e.servingLine.direction+"</span>",a.appendChild(r);var n=new Date,i=0,s=n=new Date(e.dateTime.year,e.dateTime.month-1,e.dateTime.day,e.dateTime.hour,e.dateTime.minute,0);if(e.realDateTime){var d=new Date(e.realDateTime.year,e.realDateTime.month-1,e.realDateTime.day,e.realDateTime.hour,e.realDateTime.minute,0);n=d,i=(d-s)/1e3/60}else n=s;var l=n.getHours(),c=n.getMinutes();c<10&&(c="0"+c);var u="";e.servingLine.delay>0?u=e.servingLine.delay:0!==i&&(u=i);var o=document.createElement("td");o.className="departures__departure",o.innerHTML='<span class="departures__departure__time-relative small bright">'+l+":"+c+"</span>",a.appendChild(o);var m=document.createElement("td");return m.className="departures__delay",u>0&&(m.innerHTML='<span class="departures__delay__time xsmall">+ '+u+"</span>"),a.appendChild(m),a}requestWidgets.forEach((function(e){load(e);var a=e.dataset.reload;a>0&&setInterval((function(){load(e)}),1e3*a)}));