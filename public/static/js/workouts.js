"use strict";const exercisesSelected=document.querySelector("#exercises_selected .content");document.addEventListener("click",(function(e){let t=e.target.closest(".exercise .plus"),s=e.target.closest(".minus"),l=e.target.closest(".exercise .headline"),c=e.target.closest(".exercise"),n=e.target.closest(".add_set"),r=e.target.closest(".remove_set"),d=e.target.closest("#add_workout_day");if(s&&(e.preventDefault(),s.parentElement.parentElement.remove(),loadSelectedMuscles()),t){e.preventDefault();let t=exercisesSelected.childElementCount,s=c.cloneNode(!0);s.classList.add("selected"),s.querySelector(".plus").classList.add("hidden"),s.querySelector(".minus").classList.remove("hidden"),s.querySelector(".handle").classList.remove("hidden"),s.querySelector(".sets").classList.remove("hidden");let l=document.createElement("input");l.type="hidden",l.name="exercises["+t+"][id]",l.value=c.dataset.id,s.appendChild(l),s.querySelectorAll("input").forEach((function(e,s){e.name.includes("dummy")||(e.setAttribute("name",e.name.replace(/exercises\[[^\]]*\]/,"exercises["+t+"]")),e.removeAttribute("disabled"))})),exercisesSelected.appendChild(s),loadSelectedMuscles()}if(l&&(e.preventDefault(),e.target.parentElement.classList.toggle("active")),n){console.log("add set");let e=c.querySelector(".sets .set-list"),t=c.querySelector(".sets .set-dummy"),s=c.querySelectorAll(".sets .set").length,l=t.cloneNode(!0);l.classList.remove("hidden"),l.classList.remove("set-dummy"),l.querySelector(".set-nr").innerHTML=s,l.querySelectorAll("input").forEach((function(e,t){e.setAttribute("name",e.name.replace("dummy",s-1)),e.removeAttribute("disabled")})),e.appendChild(l)}if(r){let e=c.querySelectorAll(".sets .set:not(.set-dummy)");if(e.length>0){e[e.length-1].remove()}}if(d){e.preventDefault();let t=exercisesSelected.childElementCount,s=document.createElement("div");s.classList.add("workout_day_split");let l=document.createElement("input");l.type="hidden",l.name="exercises["+t+"][type]",l.value="day";let c=document.createElement("input");c.type="text",c.name="exercises["+t+"][notice]",c.required=!0;let n=document.createElement("div");n.classList.add("icons");let r=document.createElement("i");r.classList.add("minus"),r.classList.add("fas"),r.classList.add("fa-minus");let d=document.createElement("i");d.classList.add("handle"),d.classList.add("fas"),d.classList.add("fa-arrows-alt"),n.appendChild(r),n.appendChild(d),s.appendChild(l),s.appendChild(c),s.appendChild(n),exercisesSelected.appendChild(s)}})),new Sortable(exercisesSelected,{group:{name:"exercise"},handle:".handle",dataIdAttr:"data-id",onUpdate:function(e){this.toArray();exercisesSelected.querySelectorAll(".exercise, .workout_day_split").forEach((function(e,t){e.querySelectorAll("input").forEach((function(e){e.setAttribute("name",e.name.replace(/exercises\[[^\]]*\]/,"exercises["+t+"]"))}))}))}});const usedMusclesWrapper=document.querySelector("#usedMusclesWrapper"),loadingIconMuscles=document.querySelector("#loadingIconMuscles");function loadSelectedMuscles(){let e=[];exercisesSelected.querySelectorAll(".exercise").forEach((function(t,s){e.push(t.dataset.id)}));let t={exercises:e};getCSRFToken().then((function(e){return t.csrf_name=e.csrf_name,t.csrf_value=e.csrf_value,fetch(jsObject.workouts_exercises_selected_muscles,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})})).then((function(e){return e.json()})).then((function(e){"error"!==e.status&&(usedMusclesWrapper.innerHTML=e.data)})).catch((function(e){console.log(e)}))}