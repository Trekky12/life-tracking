"use strict";document.addEventListener("click",(function(e){let t=e.target.closest(".add_set"),r=e.target.closest(".remove_set"),s=e.target.closest(".minus");if(t){let t=e.target.closest(".exercise"),r=t.querySelector(".set-list"),s=t.querySelector(".set-dummy"),o=t.querySelectorAll(".set").length,n=s.cloneNode(!0);n.classList.remove("hidden"),n.classList.remove("set-dummy"),n.querySelector(".set-nr").innerHTML=o,n.querySelectorAll("input").forEach((function(e,t){e.setAttribute("name",e.name.replace("dummy",o-1)),e.removeAttribute("disabled")})),r.appendChild(n)}if(r){let t=e.target.closest(".exercise").querySelectorAll(".set:not(.set-dummy)");if(t.length>0){t[t.length-1].remove()}}if(s){e.preventDefault();let t=s.parentElement.parentElement;if("day"===t.dataset.category){let e=[];for(e.push(t),t=t.nextElementSibling;t&&"day"!==t.dataset.category;)e.push(t),t=t.nextElementSibling;e.forEach((function(e){e.remove()}))}else t.remove()}}));const exercisesSession=document.querySelector("#sessionExercises"),addExerciseBtn=document.querySelector("#addExercise"),addExerciseSelect=document.querySelector("#addExerciseToSession"),addExerciseSetNr=document.querySelector("#setCount");addExerciseBtn.addEventListener("click",(function(e){let t=addExerciseSelect.value,r=addExerciseSetNr.value,s=exercisesSession.querySelectorAll('[data-type="workout-element"]').length;return fetch(jsObject.workouts_exercises_data+"?exercise="+t+"&sets="+r+"&count="+s,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"error"!==e.status&&exercisesSession.insertAdjacentHTML("beforeend",e.data)})).catch((function(e){console.log(e)}))})),createSortable(exercisesSession);const workoutSupersets=document.querySelectorAll(".workout_superset_child");function createSortable(e){new Sortable(e,{group:{name:"exercise"},swapThreshold:.5,fallbackOnBody:!0,handle:".handle",dataIdAttr:"data-id",onUpdate:function(e){console.log("update"),updateFields()},onAdd:function(e){console.log("add");let t=e.to.dataset.type,r=e.item.querySelector('input[name*="is_child"]');r.value="main"===t?0:1,updateFields()}})}function updateFields(){let e=exercisesSession.querySelectorAll('[data-type="workout-element"]');console.log(e),e.forEach((function(e,t){e.querySelectorAll("input").forEach((function(e){e.setAttribute("name",e.name.replace(/exercises\[[^\]]*\]/,"exercises["+t+"]"))}))}))}workoutSupersets.forEach((function(e,t){createSortable(e)}));