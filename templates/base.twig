<!DOCTYPE html>
<html lang="{{i18n.template}}">
    <head>
        <meta charset="utf-8">
        <title>{{lang["PAGE_TITLE"]}}</title>
        <meta name="description" content="Life Tracking"/>
        <meta name="date" content="{{ "now"|date("Y-m-d") }}"/>
        <meta name="robots" content="noindex,nofollow">
        <meta http-equiv="content-language" content="en">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <meta name="theme-color" content="#1565c0"/>

        <link rel="stylesheet" type="text/css" href="{{base_url()}}/static/assets/css/open-sans.css" />
        <link rel="stylesheet" type="text/css" href="{{base_url()}}/static/assets/css/font-awesome.min.css" />
        <link rel="stylesheet" type="text/css" href="{{base_url()}}/static/assets/css/normalize.min.css" />
        <link rel="stylesheet" type="text/css" href="{{base_url()}}/static/assets/css/flatpickr.min.css" />
        <link rel="stylesheet" type="text/css" href="{{base_url()}}/static/assets/css/jstable.css" />
        {% block style %}
        {% endblock %}
        <link rel="stylesheet" type="text/css" href="{{base_url()}}/static/style.css?ver=20191229" />

        <link rel="apple-touch-icon" sizes="180x180" href="{{base_url()}}/static/assets/favicon/apple-touch-icon.png?v=20180727">
        <link rel="icon" type="image/png" sizes="32x32" href="{{base_url()}}/static/assets/favicon/favicon-32x32.png?v=20180727">
        <link rel="icon" type="image/png" sizes="16x16" href="{{base_url()}}/static/assets/favicon/favicon-16x16.png?v=20180727">
        <link rel="manifest" href="{{base_url()}}/static/assets/favicon/site.webmanifest?v=20181102">
        <link rel="mask-icon" href="{{base_url()}}/static/assets/favicon/safari-pinned-tab.svg?v=20180727" color="#5bbad5">
        <link rel="shortcut icon" href="{{base_url()}}/favicon.ico?v=20180727">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="msapplication-config" content="{{base_url()}}/static/assets/favicon/browserconfig.xml?v=20180727">
        <meta name="theme-color" content="#ffffff">
        <meta name="timestamp" content="{{ 'now'|date('U') }}">
    </head>

    <body class="{{active}}{%if boardsview == 1%} boards-view{%endif%}">

        {% if not user is null %}
            <header id="masthead" class="site-header">
                <div class="header-inner">
                    {% include 'main/navigation.twig' %}
                </div>
            </header>
        {% endif %}

        <div id="content" class="site-content container">
            {% if flash() is not empty %}
                <div class="alert hide-offline {{flash('message_type')|last}}">
                    <span class="closebtn" >&times;</span>
                    <span class="alert-message">
                        {% for msg in flash('message') %}
                            <p>{{ msg }}</p>
                        {% endfor %}
                    </span>
                </div>
            {% endif %}
            <div id="offline-alert" class="alert danger hidden">
                <span class="alert-message">
                    <p>{{ lang["YOU_ARE_OFFLINE"] }}</p>
                </span>
            </div>
            {% block body %}
            {% endblock %}
        </div>
        {% block bottom %}
        {% endblock %}
        
        <footer class="site-footer hidden">
            <div class="footer-inner">
                	
            </div>
        </footer>

        <script type='text/javascript' >
            var allowedReload = false;
            var jsObject = {
                'marker_url': '{{ path_for("getMarkers") }}',
                'delete_marker_url': '{{ path_for("delete_marker") }}',
                'get_address_url': '{{ path_for("get_address") }}',
                'finances_table': "{{path_for("finances_table")}}",
                'fuel_table': "{{path_for("car_service_fuel_table")}}",
                'service_table': "{{path_for("car_service_service_table")}}",
                'datacount': '{{datacount}}',
                'datacount2': '{{datacount2}}',
                'set_mileage_type': '{{path_for("set_mileage_type")}}',
                'stack_save': '{{path_for("stack_save")}}',
                'stack_position_url': '{{path_for("stack_update_position")}}',
                'card_save': '{{path_for("card_save")}}',
                'card_position_url': '{{path_for("card_update_position")}}',
                'card_movestack_url': '{{path_for("card_move_stack")}}',
                'stack_get_url': '{{path_for("stack_get")}}',
                'stack_delete': '{{path_for("stack_delete")}}',
                'stack_archive': '{{path_for("stack_archive")}}',
                'card_get_url': '{{path_for("card_get")}}',
                'card_delete': '{{path_for("card_delete")}}',
                'card_archive': '{{path_for("card_archive")}}',
                'label_save': '{{path_for("label_save")}}',
                'label_get_url': '{{path_for("label_get")}}',
                'label_delete': '{{path_for("label_delete")}}',
                'set_archive': '{{path_for("set_archive")}}',
                'comment_save': '{{path_for("comment_save")}}',
                'get_category_costs': '{{path_for("finances_budgets_category_costs")}}',
                'notifications_subscribe': '{{path_for("notifications_clients_subscribe")}}',
                'applicationServerPublicKey': '{{push.publicKey}}',
                'csrf_tokens_url': '{{path_for('get_csrf_tokens')}}',
                'notifications_clients_categories': '{{path_for('notifications_clients_categories')}}',
                'notifications_clients_set_category': '{{path_for('notifications_clients_set_category')}}',
                'notifications_clients_set_category_user': '{{path_for('notifications_clients_set_category_user')}}',
                'notifications_clients_manage': '{{path_for('notifications_clients_manage')}}',
                'notifications_get': '{{path_for('notifications_get')}}',
                'notifications_get_unread': '{{path_for('notifications_get_unread')}}',
                'activities_get': '{{path_for('activities_get')}}',
                
                {% if not hasCrawlerTable is null %}
                'crawler_table': '{{path_for('crawlers_table', {'crawler': crawler.hash})}}',
                'crawler_filter': '{{path_for('set_crawler_filter', {'crawler': crawler.hash})}}',
                {% endif %}
                    
                {% if not from is null %}    
                'dateFrom': '{{from}}',
                {% endif %}
                {% if not to is null %}    
                'dateTo': '{{to}}',
                {% endif %}
                    
                {% if not hasSplitbillTable is null %}
                'splitbill_table': '{{path_for('splitbill_bills_table', {'group': group.hash})}}',
                {% endif %}
                'get_location_of_address': '{{ path_for("get_location_of_address") }}',    
                {% if not isTrips is null %}
                'trip_markers_url': '{{path_for('trips_markers', {'trip': trip.hash})}}',
                {% endif %}
                {% if not hasTimesheetTable is null %}
                'timesheets_table': '{{path_for('timesheets_sheets_table', {'project': project.hash})}}',
                {% endif %}
                    
            };
            var default_location = {'lat': '{{location.lat}}', 'lng': '{{location.lng}}', 'zoom': '{{location.zoom}}'};
            var i18n = {{i18n|json_encode()|raw}};
            var lang = {
                "really_delete": '{{lang["REALLY_DELETE"]}}',
                'address': '{{lang["ADDRESS"]}}',
                'delete_text': '{{lang["DELETE"]}}',
                'accuracy': '{{lang["ACCURACY"]}}',
                'consumption': '{{lang["CONSUMPTION"]}}',
                'add': '{{lang["ADD"]}}',
                'cancel': '{{lang["CANCEL"]}}',
                'really_archive': '{{lang["REALLY_ARCHIVE"]}}',
                'update': '{{lang["UPDATE"]}}',
                'labels': '{{lang["LABELS"]}}',
                'categories': '{{lang["CATEGORIES"]}}',
                'undo_archive': '{{lang["UNDO_ARCHIVE"]}}',
                'really_close_page': '{{lang["REALLY_CLOSE_PAGE"]}}',
                'nothing_found': '{{lang["NOTHING_FOUND"]}}',
                'loading': '{{lang["LOADING"]}}',
                'searching': '{{lang["SEARCHING"]}}',
                'table_perpage': '{{lang["TABLE_PERPAGE"]}}',
                'table_info': '{{lang["TABLE_INFO"]}}',
                'table_infofiltered': '{{lang["TABLE_INFOFILTERED"]}}',
                'enable_push_notifications': '{{lang["ENABLE_PUSH_NOTIFICATIONS"]}}',
                'disable_push_notifications': '{{lang["DISABLE_PUSH_NOTIFICATIONS"]}}',
                'no_push_notifications_possible': '{{lang["NO_PUSH_NOTIFICATIONS_POSSIBLE"]}}',
                "really_delete_stack": '{{lang["REALLY_DELETE_STACK"]}}',
                "really_delete_board": '{{lang["REALLY_DELETE_BOARD"]}}',
                "really_delete_card": '{{lang["REALLY_DELETE_CARD"]}}',
                "really_delete_label": '{{lang["REALLY_DELETE_LABEL"]}}',
                "set_current_location": '{{lang["SET_CURRENT_LOCATION"]}}',
                "remove_location": '{{lang["REMOVE_LOCATION"]}}',
                "car_refuel": '{{lang["CAR_REFUEL"]}}',
                "car_service": '{{lang["CAR_SERVICE"]}}',
                "category": '{{lang["CATEGORY"]}}',
                "really_close_stack": '{{lang["REALLY_CLOSE_STACK"]}}',
                "really_close_card": '{{lang["REALLY_CLOSE_CARD"]}}',
                "really_close_label": '{{lang["REALLY_CLOSE_LABEL"]}}',
                "splitbills_numbers_wrong": '{{lang["SPLITBILLS_NUMBERS_WRONG"]}}',
                "from": '{{lang["FROM"]}}',
                "to": '{{lang["TO"]}}',
                "steps": '{{lang["STEPS"]}}',
                "request_error": '{{lang["REQUEST_ERROR"]}}',
                "set_navigation": '{{lang["SET_NAVIGATION"]}}',
                "routing_error": '{{lang["ROUTING_ERROR"]}}',
                "routing_error_too_many_requests": '{{lang["ROUTING_ERROR_TOO_MANY_REQUESTS"]}}'
            };
            var tokens = {{ csrf_js|json_encode()|raw }};
        </script>

        <script src="{{base_url()}}/static/assets/js/flatpickr.min.js" type="text/javascript"></script>
        <script src="{{base_url()}}/static/assets/js/i18n/{{i18n.template}}.js" type="text/javascript"></script>
        <script src="{{base_url()}}/static/assets/js/moment-with-locales.min.js" type="text/javascript"></script>  
        <script src="{{base_url()}}/static/assets/js/Chart.min.js" type="text/javascript"></script>  
        <script src="{{base_url()}}/static/assets/js/randomColor.min.js" type="text/javascript"></script>  
        <script src="{{base_url()}}/static/assets/js/jstable.min.js?ver=20190706" type="text/javascript"></script>  

        <script src="{{base_url()}}/static/js/main.js?ver=20191206" type="text/javascript"></script>
        <script src="{{base_url()}}/static/js/tables.js?ver=20191206" type="text/javascript"></script>


        {% if not user is null %}
        <script src="{{base_url()}}/static/js/app.js?ver=20191203" type="text/javascript"></script>
        {% endif %}

        {% block javascript %}
        {% endblock %}
    </body>
</html>