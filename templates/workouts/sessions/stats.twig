{% extends "base.twig" %}

{% set active = 'workouts' %}

{% block style %}{% endblock %}

{% block javascript %}
	<script src="{{baseURL}}/static/assets/js/randomColor.min.js?ver={{CACHEMISS}}" type="text/javascript"></script>
	<script src="{{baseURL}}/static/assets/js/chart.min.js?ver={{CACHEMISS}}"></script>
	<script src="{{baseURL}}/static/assets/js/chartjs-adapter-moment.min.js?ver={{CACHEMISS}}"></script>
	<script src="{{baseURL}}/static/assets/js/chartjs-plugin-annotation.min.js?ver={{CACHEMISS}}"></script>
	<script src="{{baseURL}}/static/assets/js/hammer.min.js?ver={{CACHEMISS}}"></script>
	<script src="{{baseURL}}/static/assets/js/chartjs-plugin-zoom.min.js?ver={{CACHEMISS}}"></script>
	<script src="{{baseURL}}/static/js/workouts-stats.js?ver={{CACHEMISS}}"></script>
{% endblock %}

{% block pageheader %}
	<div class="page-header">
		<div class="page-headline">
			<a href="{{ url_for_with_last_query_params('workouts') }}">
				<div tabindex="-1" class="icon-ripple-wrapper back-arrow">{{ fontawesome('fas fa-arrow-left') }}</div>
			</a>
			<h2>
				{% if plan is not empty %}
					{{plan.name|raw}}
				{% else %}
					{{"WORKOUTS_SESSIONS"|trans}}
				{% endif %}
			</h2>
		</div>
	</div>
{% endblock %}

{% block tabbar %}
	{% if plan is not empty %}
		{% include "workouts/plan/workouts-plan-tabs.twig" with {'active':'workouts_sessions_stats'} %}
	{% endif %}
{% endblock %}

{% block body %}
	{% for exercise in exercises %}
		<div class="inner-content">
			<div class="inner-content-header light">
				<h2>{{ exercise['exercise'].name }}</h2>
			</div>

			<div class="page-content">
				{% if exercise['exercise'].get_thumbnail() != ''%}
					<div class="thumbnail">
						<img src="/{{uploads_folder}}/exercises/{{exercise['exercise'].get_thumbnail()}}"/>
					</div>
				{% endif %}
				{% if (exercise['exercise'].isCategoryReps() or exercise['exercise'].isCategoryRepsWeight()) and exercise['data']['repeats'] is not null %}
					<h3>{{ "WORKOUTS_CATEGORY_REPS"|trans }}</h3>
					<canvas data-values="{{exercise['data']['repeats']|json_encode(constant('JSON_NUMERIC_CHECK'))}}" data-min="{{start}}" data-max="{{end}}" data-dates="{{dates|json_encode()}}" class="workoutChart chart"></canvas>
				{% endif %}
				{% if exercise['exercise'].isCategoryRepsWeight() and exercise['data']['weight'] is not null %}
					<h3>{{ "WORKOUTS_WEIGHT"|trans }}</h3>
					<canvas data-values="{{exercise['data']['weight']|json_encode(constant('JSON_NUMERIC_CHECK'))}}" data-min="{{start}}" data-max="{{end}}" data-dates="{{dates|json_encode()}}" class="workoutChart chart"></canvas>
				{% endif %}
				{% if (exercise['exercise'].isCategoryTime() or exercise['exercise'].isCategoryDistanceTime()) and exercise['data']['time'] is not null %}
					<h3>{{ "WORKOUTS_CATEGORY_TIME"|trans }}</h3>
					<canvas data-values="{{exercise['data']['time']|json_encode(constant('JSON_NUMERIC_CHECK'))}}" data-min="{{start}}" data-max="{{end}}" data-dates="{{dates|json_encode()}}" class="workoutChart chart"></canvas>
				{% endif %}
				{% if exercise['exercise'].isCategoryDistanceTime() and exercise['data']['distance'] is not null %}
					<h3>{{ "WORKOUTS_DISTANCE"|trans }}</h3>
					<canvas data-values="{{exercise['data']['distance']|json_encode(constant('JSON_NUMERIC_CHECK'))}}" data-min="{{start}}" data-max="{{end}}" data-dates="{{dates|json_encode()}}" class="workoutChart chart"></canvas>
				{% endif %}
			</div>
		</div>
	{% endfor %}
{% endblock %}
